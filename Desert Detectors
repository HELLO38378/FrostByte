--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

--// Events
local giveQuestEvent = ReplicatedStorage:WaitForChild("Give_Quest")
local winQuestEvent = ReplicatedStorage:WaitForChild("Win_Quest")

--// Function to send quest
local function giveCash(amount)
    local questData = {
        [1] = "Getting Settled",
        [2] = {
            [1] = { [1] = 0, [2] = 0 },
            [2] = "Any"
        },
        [3] = { [1] = amount },
        [4] = "Return to the cotton fields"
    }

    pcall(function() giveQuestEvent:FireServer(questData) end)
    pcall(function() winQuestEvent:FireServer("Getting Settled") end)
end

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
ScreenGui.Name = "FrostbyteHub"

-- Main Frame
local Frame = Instance.new("Frame", ScreenGui)
Frame.BackgroundColor3 = Color3.fromRGB(16, 16, 16)
Frame.Size = UDim2.new(0, 250, 0, 360)
Frame.Position = UDim2.new(0.5, -125, 0.5, -180)
Frame.Active = true
Frame.Draggable = true
Frame.Visible = true

-- Frostbyte Hub Title
local HubLabel = Instance.new("TextLabel", Frame)
HubLabel.Text = "Frostbyte Hub"
HubLabel.Font = Enum.Font.SourceSansBold
HubLabel.TextSize = 18
HubLabel.TextColor3 = Color3.new(1, 1, 1)
HubLabel.BackgroundTransparency = 1
HubLabel.Size = UDim2.new(1, -35, 0, 20)
HubLabel.Position = UDim2.new(0, 5, 0, 5)
HubLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Close Button
local CloseBtn = Instance.new("TextButton", Frame)
CloseBtn.Text = "X"
CloseBtn.Font = Enum.Font.SourceSansBold
CloseBtn.TextSize = 18
CloseBtn.TextColor3 = Color3.new(1, 1, 1)
CloseBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
CloseBtn.Size = UDim2.new(0, 25, 0, 20)
CloseBtn.Position = UDim2.new(1, -30, 0, 5)
CloseBtn.BorderSizePixel = 0

CloseBtn.MouseButton1Click:Connect(function()
    Frame.Visible = false
end)

-- Title
local Title = Instance.new("TextLabel", Frame)
Title.Text = "Choose Your Reward"
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 22
Title.TextColor3 = Color3.new(1, 1, 1)
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Position = UDim2.new(0, 0, 0.12, 0)

-- Warning Label
local WarningLabel = Instance.new("TextLabel", Frame)
WarningLabel.Text = "Try and stay under level 2000 as the anti-cheat may instant ban you!"
WarningLabel.Font = Enum.Font.SourceSansBold
WarningLabel.TextWrapped = true
WarningLabel.TextSize = 16
WarningLabel.TextColor3 = Color3.new(1, 1, 1)
WarningLabel.BackgroundTransparency = 1
WarningLabel.Size = UDim2.new(0.9, 0, 0, 40)
WarningLabel.Position = UDim2.new(0.05, 0, 0.25, 0)

-- 1M Button
local Button1M = Instance.new("TextButton", Frame)
Button1M.Text = "1M CASH"
Button1M.Font = Enum.Font.SourceSansSemibold
Button1M.TextSize = 20
Button1M.TextColor3 = Color3.new(1, 1, 1)
Button1M.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Button1M.Size = UDim2.new(0.8, 0, 0, 35)
Button1M.Position = UDim2.new(0.1, 0, 0.42, 0)
Button1M.BorderSizePixel = 0
Button1M.MouseButton1Click:Connect(function()
    giveCash(1_000_000)
end)

-- 100M Button
local Button100M = Button1M:Clone()
Button100M.Text = "100M CASH"
Button100M.Position = UDim2.new(0.1, 0, 0.52, 0)
Button100M.Parent = Frame
Button100M.MouseButton1Click:Connect(function()
    giveCash(100_000_000)
end)

-- 10B Button
local Button10B = Button1M:Clone()
Button10B.Text = "10B CASH"
Button10B.Position = UDim2.new(0.1, 0, 0.62, 0)
Button10B.Parent = Frame
Button10B.MouseButton1Click:Connect(function()
    giveCash(10_000_000_000)
end)

-- Discord Button
local DiscordButton = Button1M:Clone()
DiscordButton.Text = "Discord"
DiscordButton.TextSize = 18
DiscordButton.Size = UDim2.new(0.8, 0, 0, 30)
DiscordButton.Position = UDim2.new(0.1, 0, 0.72, 0)
DiscordButton.Parent = Frame
DiscordButton.MouseButton1Click:Connect(function()
    setclipboard("https://dsc.gg/getfrostbyte")
    DiscordButton.Text = "Copied!"
    task.wait(1.5)
    DiscordButton.Text = "Discord"
end)

-- Dropdown Button inside panel
local DropdownButton = Instance.new("TextButton", Frame)
DropdownButton.Text = "Show/Hide Panel"
DropdownButton.Font = Enum.Font.SourceSansBold
DropdownButton.TextSize = 18
DropdownButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DropdownButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
DropdownButton.Size = UDim2.new(0.8, 0, 0, 30)
DropdownButton.Position = UDim2.new(0.1, 0, 0.85, 0)
DropdownButton.BorderSizePixel = 0

DropdownButton.MouseButton1Click:Connect(function()
    Frame.Visible = not Frame.Visible
end)

-- Frostbyte Hub Toggle Button (outside panel)
local ToggleButton = Instance.new("TextButton", ScreenGui)
ToggleButton.Text = "Frostbyte Hub"
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 18
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ToggleButton.Size = UDim2.new(0, 200, 0, 50)
ToggleButton.Position = UDim2.new(0, 10, 0.42, 0)  -- Left side, just above center
ToggleButton.ZIndex = 2

-- Make ToggleButton draggable
local dragging = false
local dragInput, mousePos, startPos

ToggleButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        mousePos = input.Position
        startPos = ToggleButton.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - mousePos
        ToggleButton.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- Toggle main panel on click
ToggleButton.MouseButton1Click:Connect(function()
    Frame.Visible = not Frame.Visible
end)
